"set noswapfile      " No swap files
set backup          " We all know backing up is important
set tabstop=4		" An indentation level every four columns
set expandtab		" Convert all tabs typed into spaces
set shiftwidth=4	" Indent/outdent by four columns
set shiftround		" Always indent/outdent to the nearest tabstop
set textwidth=78    " Maximum width of text
set number
set wildmode=longest,list
set foldmethod=manual
set viewoptions=folds
set hlsearch
set encoding=utf-8
set fileencodings=ucs-bom,utf-8,iso-2022-jp,sjis,cp932,euc-jp,cp20932,guess
set backspace=indent,eol,start
" Reset hilight search by pressing Escape 2 times
nnoremap <silent> <ESC><ESC> :nohlsearch<CR>
let mapleader=","   " Sets mapleader to ,

set splitright      " split to the right
set splitbelow      " split below

" Set backupdir to be ~/Dropbox/vim/backup/
"if isdirectory(expand('~/Dropbox/vim/backup/'))
"    set backupdir=~/Dropbox/vim/backup/
"else
    if !isdirectory(expand('~/.vim/backup/'))
        call mkdir(expand("~/.vim/backup/"))
    endif

    set backupdir=~/.vim/backup/
"endif

" Set viewdir to be ~/Dropbox/vim/view/
if isdirectory(expand('~/Dropbox/vim/view/'))
    set viewdir=~/Dropbox/vim/view/
else
    if !isdirectory(expand('~/.vim/view/'))
        call mkdir(expand("~/.vim/view/"))
    endif

    set viewdir=~/.vim/view/
endif

nnoremap <silent> <Leader>mkv :mkview!<CR>
nnoremap <silent> <Leader>lv :loadview<CR>

if expand('%') != '' && &buftype !~ 'nofile'
    autocmd BufWinLeave *.* mkview!
endif

if expand('%') != '' && &buftype !~ 'nofile'
    autocmd BufWinEnter *.* silent loadview
endif


" Insert closing braces
"inoremap {      {}<Left>
inoremap {<CR>  {<CR>}<Esc>O
inoremap {{<CR> {{<CR>}};<Esc>O
"inoremap {{     {
"inoremap {}     {}
" Insert closing parenthesis
"inoremap (      ()<Left>
"inoremap (<CR>  (<CR>)<Esc>O
"inoremap ((     (
"inoremap ()     ()
" Brackets
"inoremap [      []<Left>
"inoremap [<CR>  [<CR>]<Esc>O
"inoremap [[     [
"inoremap []     []

" Create and auto-close comment blocks in Java
" autocmd FileType java imap /**<CR>    /**<CR>/<Esc>O

" Move by physical line
nnoremap j gj
nnoremap k gk

" C-d is "Delete"
inoremap <C-d> <Del>

" Set textwidth to 0 when using text files
autocmd FileType text set textwidth=0
